{"version":3,"sources":["../src/quizgame.js"],"names":["define","$","Y","notification","ajax","questions","quizgame","stage","score","particles","gameObjects","images","imagesLoaded","loaded","player","planet","level","displayRect","x","y","width","height","question","interval","enemySpeed","touchDown","mouseDown","currentTeam","lastShot","currentPointsLeft","context","inFullscreen","on","smallscreen","fullscreen","playSound","soundName","document","getElementById","checked","soundElement","currentTime","play","removeAttribute","classList","remove","removeClass","clientWidth","clientHeight","style","sizeScreen","fschange","landscape","window","matchMedia","matches","requestFullscreen","msRequestFullscreen","mozRequestFullScreen","buttonContainer","innerWidth","add","addClass","blur","imageSmoothingEnabled","orientationChange","clearEvents","onkeydown","onkeyup","onmousedown","onmouseup","onmousemove","ontouchstart","ontouchend","ontouchmove","onresize","menuEvents","menukeydown","menumousedown","menutouchend","showMenu","clearRect","fillStyle","font","textAlign","length","fillText","M","util","get_string","loadGame","shuffle","forEach","src","image","Image","onload","gameLoaded","startGame","endGame","call","methodname","args","quizgameid","Math","trunc","fail","exception","clearInterval","setInterval","draw","update","Player","push","Planet","direction","movespeed","nextLevel","keyup","keydown","mouseup","mousedown","mousemove","touchstart","touchend","touchmove","addEventListener","cancelled","runLevel","bounds","type","answers","answer","enemy","TFEnemy","random","text","fraction","MultiEnemy","single","parseFloat","i","stems","stem","MatchEnemy","objects","alive","round","lives","wrapText","lastScore","Star","splice","j","collide","Rectangle","left","top","prototype","right","bottom","Contains","point","Intersect","rectangle","retval","GameObject","loadImage","velocity","decay","drawImage","getRect","die","mouse","Object","create","Shoot","unshift","Laser","canShoot","spray","gotShot","shot","Enemy","xspeed","yspeed","movementClock","shotFrequency","shotClock","floor","laser","friendly","shipReachedEnd","killAllAlive","deflect","pairid","hightlighted","alives","match","hightlight","unhightlight","laserSpeed","Particle","colour","aliveTime","fillRect","stroke","object1","object2","collideOrdered","objectsIntersect","rect1","rect2","num","input","wrapUpwards","textHeight","maxLineWidth","drawLines","originalY","words","split","line","word","tempLine","metrics","measureText","testWidth","yOffset","drawLine","modifier","amountLeft","filter","e","indexOf","keyCode","preventDefault","target","playerWasClicked","offsetX","offsetY","event","touches","rect","getBoundingClientRect","pageX","clientY","array","currentIndex","temporaryValue","randomIndex","doInitialize","q","qid","getContext","init"],"mappings":"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","sourcesContent":["// This file is part of Moodle - http://moodle.org/\n//\n// Moodle is free software: you can redistribute it and/or modify\n// it under the terms of the GNU General Public License as published by\n// the Free Software Foundation, either version 3 of the License, or\n// (at your option) any later version.\n//\n// Moodle is distributed in the hope that it will be useful,\n// but WITHOUT ANY WARRANTY; without even the implied warranty of\n// MERCHANTABILITY or FITNESS FOR A PARTICULAR PURPOSE.  See the\n// GNU General Public License for more details.\n//\n// You should have received a copy of the GNU General Public License\n// along with Moodle.  If not, see <http://www.gnu.org/licenses/>.\n\n/**\n * This class manages the confirmation pop-up (also called the pre-flight check)\n * that is sometimes shown when a use clicks the start attempt button.\n *\n * This is also responsible for opening the pop-up window, if the quiz requires to be in one.\n *\n * @module    mod_quizgame/quizgame\n * @class     quizgame\n * @package   mod_quizgame\n * @copyright 2016 John Okely <john@moodle.com>\n * @license   http://www.gnu.org/copyleft/gpl.html GNU GPL v3 or later\n */\ndefine(['jquery', 'core/yui', 'core/notification', 'core/ajax'], function($, Y, notification, ajax) {\n    var questions;\n    var quizgame;\n    var stage;\n    var score = 0;\n    var particles = [];\n    var gameObjects = [];\n    var images = [\n        'pix/icon.gif',\n        'pix/planet.png',\n        'pix/ship.png',\n        'pix/enemy.png',\n        'pix/enemystem.png',\n        'pix/enemychoice.png',\n        'pix/enemystemselected.png',\n        'pix/enemychoiceselected.png',\n        'pix/laser.png',\n        'pix/enemylaser.png'\n    ];\n    var imagesLoaded = 0;\n    var loaded = false;\n    var player;\n    var planet;\n    var level = -1;\n    var displayRect = {x: 0, y: 0, width: 0, height: 0};\n    var question = \"\";\n    var interval;\n    var enemySpeed;\n    var touchDown = false;\n    var mouseDown = false;\n    var currentTeam = [];\n    var lastShot = 0;\n    var currentPointsLeft = 0;\n    var context;\n    var inFullscreen = false;\n\n    $('#mod_quizgame_fullscreen_button').on('click', function() {\n        if (inFullscreen) {\n            inFullscreen = false;\n            smallscreen();\n        } else {\n            fullscreen();\n        }\n    });\n\n    /**\n     * Play sound effect\n     * @param {string} soundName\n     */\n    function playSound(soundName) {\n        if (document.getElementById(\"mod_quizgame_sound_on\").checked) {\n            var soundElement = document.getElementById(\"mod_quizgame_sound_\" + soundName);\n            soundElement.currentTime = 0;\n            soundElement.play();\n        }\n    }\n\n    /**\n     * Adjust for small screens.\n     */\n    function smallscreen() {\n        inFullscreen = false;\n        stage.removeAttribute(\"width\");\n        stage.removeAttribute(\"height\");\n        stage.removeAttribute(\"style\");\n\n        stage.classList.remove(\"floating-game-canvas\");\n        $(\"#button_container\").removeClass(\"floating-button-container fixed-bottom\");\n\n        displayRect.width = stage.clientWidth;\n        displayRect.height = stage.clientHeight;\n        stage.style.width = displayRect.width;\n        stage.style.height = displayRect.height;\n\n        sizeScreen(stage);\n    }\n\n    /**\n     * Adjust screen size (switch between modes).\n     */\n    function fschange() {\n        if (inFullscreen) {\n            smallscreen();\n        }\n    }\n\n    /**\n     * Expand to full screen.\n     */\n    function fullscreen() {\n        var landscape = window.matchMedia(\"(orientation: landscape)\").matches;\n\n        if (stage.requestFullscreen) {\n              stage.requestFullscreen();\n        } else if (stage.msRequestFullscreen) {\n              stage.msRequestFullscreen();\n        } else if (stage.mozRequestFullScreen) {\n              stage.mozRequestFullScreen();\n        }\n        // The stage.webkitRequestFullscreen() method was removed, due to very easily exiting of full screen in iOS,\n        // along with browser messages asking if you are typing in fullscreen.\n\n        inFullscreen = true;\n        var buttonContainer = $(\"#button_container\");\n\n        var width = window.innerWidth;\n\n        // The window.innerHeight returns an offset value on iOS devices in safari only\n        // while in portrait mode for some reason.\n        var height = $(window).height();\n\n        // Switch width and height\n        if (landscape && width < height) {\n            height = [width, width = height][0];\n        }\n\n        // Gets the actual button container height, then adds 16px; 8px on the\n        // top and 8px on the bottom for the page margin.\n        height -= buttonContainer.height() + 16;\n\n        displayRect.width = width;\n        displayRect.height = height;\n\n        stage.style.width = width + \"px\";\n        stage.style.height = height + \"px\";\n\n        // Makes the canvas float.\n        stage.classList.add(\"floating-game-canvas\");\n\n        // This makes the button container float below the game canvas.\n        buttonContainer.addClass(\"floating-button-container fixed-bottom\");\n\n        $(\"#mod_quizgame_fullscreen_button\").blur(); // The button pressed was still focused, so a blur is necessary.\n\n        sizeScreen(stage);\n    }\n\n    /**\n     * Adjust screen size based on browser window.\n     * @param {object} stage\n     */\n    function sizeScreen(stage) {\n\n        stage.width = displayRect.width;\n        stage.height = displayRect.height;\n        context.imageSmoothingEnabled = false;\n    }\n\n    /**\n     * Helper function for when the screen size chages due to rotating on mobile.\n     */\n    function orientationChange() {\n        if (inFullscreen) {\n            fullscreen();\n        } else {\n            smallscreen();\n        }\n    }\n\n    /**\n     * Helper function to clear all events.\n     */\n    function clearEvents() {\n        document.onkeydown = null;\n        document.onkeyup = null;\n        document.onmousedown = null;\n        document.onmouseup = null;\n        document.onmousemove = null;\n        document.ontouchstart = null;\n        document.ontouchend = null;\n        document.ontouchmove = null;\n        window.onresize = null;\n    }\n\n    /**\n     * Helper function to handle JS Events.\n     */\n    function menuEvents() {\n        clearEvents();\n        document.onkeydown = menukeydown;\n        document.onmouseup = menumousedown;\n        document.ontouchend = menutouchend;\n        window.onresize = orientationChange;\n    }\n\n    /**\n     * Helper function to display game start screen\n     */\n    function showMenu() {\n\n        context.clearRect(0, 0, displayRect.width, displayRect.height);\n\n        context.fillStyle = '#FFFFFF';\n        context.font = \"18px Audiowide\";\n        context.textAlign = 'center';\n\n        if (questions !== null && questions.length > 0) {\n            context.fillText(M.util.get_string('spacetostart', 'mod_quizgame'), displayRect.width / 2, displayRect.height / 2);\n            menuEvents();\n        } else {\n            context.fillText(M.util.get_string('emptyquiz', 'mod_quizgame'), displayRect.width / 2, displayRect.height / 2);\n        }\n    }\n\n    /**\n     * Helper function to load game objects\n     */\n    function loadGame() {\n\n        shuffle(questions);\n\n        if (!loaded) {\n            images.forEach(function(src) {\n                var image = new Image();\n                image.src = src;\n                image.onload = function() {\n                    imagesLoaded++;\n                    if (imagesLoaded >= images.length) {\n                        gameLoaded();\n                    }\n                };\n            });\n            loaded = true;\n        } else {\n            startGame();\n        }\n    }\n\n    /**\n     * Helper function process game-over.\n     */\n    function endGame() {\n        ajax.call([{\n            methodname: 'mod_quizgame_update_score',\n            args: {quizgameid: quizgame, score: Math.trunc(score)},\n            fail: notification.exception\n        }]);\n        menuEvents();\n    }\n\n    /**\n     * Helper function process game ready.\n     */\n    function gameLoaded() {\n\n        clearInterval(interval);\n\n        interval = setInterval(function() {\n                draw(context, displayRect, gameObjects, particles, question);\n                update(displayRect, gameObjects, particles);\n        }, 40);\n\n        startGame();\n    }\n\n    /**\n     * Helper function process game start.\n     */\n    function startGame() {\n\n        score = 0;\n        gameObjects = [];\n        particles = [];\n        level = -1;\n        enemySpeed = 0.5;\n        touchDown = false;\n        mouseDown = false;\n\n        // Queue & trigger the game_started event.\n        ajax.call([{\n            methodname: 'mod_quizgame_start_game',\n            args: {quizgameid: quizgame},\n            fail: notification.exception\n        }]);\n\n        player = new Player(\"pix/ship.png\", 0, 0);\n        player.x = displayRect.width / 2;\n        player.y = displayRect.height / 2;\n        gameObjects.push(player);\n\n        planet = new Planet(\"pix/planet.png\", 0, 0);\n        planet.image.width = displayRect.width;\n        planet.image.height = displayRect.height;\n        planet.direction.y = 1;\n        planet.movespeed.y = 0.7;\n        particles.push(planet);\n\n        nextLevel();\n\n        document.onkeyup = keyup;\n        document.onkeydown = keydown;\n        document.onmouseup = mouseup;\n        document.onmousedown = mousedown;\n        document.onmousemove = mousemove;\n        document.ontouchstart = touchstart;\n        document.ontouchend = touchend;\n        document.ontouchmove = touchmove;\n        window.onresize = orientationChange;\n\n        document.addEventListener(\"gesturestart\", cancelled, false);\n        document.addEventListener(\"gesturechange\", cancelled, false);\n        document.addEventListener(\"gestureend\", cancelled, false);\n    }\n\n    /**\n     * Helper function process next level (question).\n     */\n    function nextLevel() {\n        level++;\n        if (level >= questions.length) {\n            level = 0;\n            enemySpeed *= 1.3;\n        }\n        question = runLevel(questions, level, displayRect);\n    }\n\n    /**\n     * Helper function process current level.\n     * @param {array} questions\n     * @param {object} level\n     * @param {object} bounds\n     * @returns {string}\n     */\n    function runLevel(questions, level, bounds) {\n        currentTeam = [];\n        lastShot = 0;\n        currentPointsLeft = 0;\n\n        if (questions[level].type == 'truefalse') {\n            questions[level].answers.forEach(function(answer) {\n                var enemy = new TFEnemy(Math.random() * bounds.width, -Math.random() * bounds.height / 2,\n                                           answer.text, answer.fraction);\n                currentTeam.push(enemy);\n                gameObjects.push(enemy);\n            });\n            currentPointsLeft = 0; // This is unused by TrueFalse questions.\n        } else if (questions[level].type == 'multichoice') {\n            questions[level].answers.forEach(function(answer) {\n                var enemy = new MultiEnemy(Math.random() * bounds.width, -Math.random() * bounds.height / 2,\n                                           answer.text, answer.fraction, questions[level].single);\n                if (answer.fraction < 1) {\n                    currentTeam.push(enemy);\n                    if (answer.fraction > 0) {\n                        currentPointsLeft += parseFloat(answer.fraction);\n                    }\n                }\n                gameObjects.push(enemy);\n            });\n        } else if (questions[level].type == 'match') {\n            var i = 0;\n            var fraction = 1 / (questions[level].stems.length * 2);\n            currentPointsLeft += 1;\n            questions[level].stems.forEach(function(stem) {\n                i++;\n                var question = new MatchEnemy(Math.random() * bounds.width, -Math.random() * bounds.height / 2,\n                                              stem.question, fraction, -i, true);\n                var answer = new MatchEnemy(Math.random() * bounds.width, -Math.random() * bounds.height / 2,\n                                            stem.answer, fraction, i);\n                currentTeam.push(question);\n                currentTeam.push(answer);\n                gameObjects.push(question);\n                gameObjects.push(answer);\n            });\n        }\n        return questions[level].question;\n    }\n\n    /**\n     * Helper function to place text on screen\n     * @param {object} context\n     * @param {object} displayRect\n     * @param {objectc} objects\n     * @param {object} particles\n     * @param {string} question\n     */\n    function draw(context, displayRect, objects, particles, question) {\n        context.clearRect(0, 0, displayRect.width, displayRect.height);\n        var i = 0;\n        for (i = 0; i < particles.length; i++) {\n            particles[i].draw(context);\n        }\n\n        for (i = 0; i < objects.length; i++) {\n            objects[i].draw(context);\n        }\n\n        if (player.alive) {\n            context.fillStyle = '#FFFFFF';\n            context.font = \"18px Audiowide\";\n            context.textAlign = 'left';\n            context.fillText(M.util.get_string('score', 'mod_quizgame',\n                                               {\n                                                    \"score\": Math.round(score), \"lives\": player.lives\n                                               }),\n                                               5, displayRect.height - 20);\n            context.textAlign = 'center';\n\n            wrapText(context, question, false, 20, displayRect.width * 0.9, displayRect.width / 2, 20);\n        } else {\n            context.fillStyle = '#FFFFFF';\n            context.font = \"18px Audiowide\";\n            context.textAlign = 'center';\n            context.fillText(M.util.get_string('endofgame', 'mod_quizgame',\n                                               Math.round(player.lastScore)),\n                                               displayRect.width / 2, displayRect.height / 2);\n        }\n    }\n\n    /**\n     * Helper function main game logic: process movements and behaviours of game objects\n     * @param {object} bounds\n     * @param {object} objects\n     * @param {object} particles\n     */\n    function update(bounds, objects, particles) {\n        var i = 0;\n        for (i = 0; i < 3; i++) {\n            particles.push(new Star(bounds));\n        }\n        for (i = 0; i < particles.length; i++) {\n            particles[i].update(bounds);\n            if (!particles[i].alive) {\n                particles.splice(i, 1);\n                i--;\n            }\n        }\n        for (i = 0; i < objects.length; i++) {\n            objects[i].update(bounds);\n            for (var j = i + 1; j < objects.length; j++) {\n                collide(objects[i], objects[j]);\n            }\n            if (!objects[i].alive) {\n                objects.splice(i, 1);\n                i--;\n            }\n        }\n    }\n\n    /**\n     * Constructor for storing information about a rectangle shape\n     * @param {int} left\n     * @param {int} top\n     * @param {int} width\n     * @param {int} height\n     */\n    function Rectangle(left, top, width, height) {\n        this.left = left || 0;\n        this.top = top || 0;\n        this.width = width || 0;\n        this.height = height || 0;\n    }\n\n    Rectangle.prototype.right = function() {\n        return this.left + this.width;\n    };\n\n    Rectangle.prototype.bottom = function() {\n        return this.top + this.height;\n    };\n\n    Rectangle.prototype.Contains = function(point) {\n        return point.x > this.left &&\n            point.x < this.right() &&\n            point.y > this.top &&\n            point.y < this.bottom();\n    };\n\n    Rectangle.prototype.Intersect = function(rectangle) {\n        var retval = !(rectangle.left > this.right() ||\n            rectangle.right() < this.left ||\n            rectangle.top > this.bottom() ||\n            rectangle.bottom() < this.top);\n        return retval;\n    };\n\n    /**\n     * Generate Game Object.\n     * @param {text} src\n     * @param {int} x\n     * @param {int} y\n     */\n    function GameObject(src, x, y) {\n        if (src !== null) {\n            this.image = this.loadImage(src);\n        }\n        this.x = x;\n        this.y = y;\n        this.velocity = {x: 0, y: 0};\n        this.direction = {x: 0, y: 0};\n        this.movespeed = {x: 5, y: 3};\n        this.alive = true;\n        this.decay = 0.7;\n    }\n\n    GameObject.prototype.loadImage = function(src) {\n        if (!this.image) {\n            this.image = new Image();\n        }\n        this.image.src = src;\n        return this.image;\n    };\n\n    GameObject.prototype.update = function() {\n        this.velocity.x += this.direction.x * this.movespeed.x;\n        this.velocity.y += this.direction.y * this.movespeed.y;\n        this.x += this.velocity.x;\n        this.y += this.velocity.y;\n        this.velocity.y *= this.decay;\n        this.velocity.x *= this.decay;\n    };\n\n    GameObject.prototype.draw = function(context) {\n        context.drawImage(this.image, this.x, this.y, this.image.width, this.image.height);\n    };\n\n    GameObject.prototype.getRect = function() {\n        return new Rectangle(this.x, this.y, this.image.width, this.image.height);\n    };\n\n    GameObject.prototype.die = function() {\n        this.alive = false;\n    };\n\n    /**\n     * Constructor for Player class, all the information about the player\n     * @param {string} src\n     * @param {int} x\n     * @param {int} y\n     */\n    function Player(src, x, y) {\n        GameObject.call(this, src, x, y);\n        this.mouse = {x: 0, y: 0};\n        this.movespeed = {x: 6, y: 4};\n        this.lives = 3;\n        this.lastScore = 0;\n    }\n\n    Player.prototype = Object.create(GameObject.prototype);\n    Player.prototype.update = function(bounds) {\n        if (mouseDown || touchDown) {\n            if (this.x < this.mouse.x - (this.image.width)) {\n                player.direction.x = 1;\n            } else if (this.x > this.mouse.x) {\n                player.direction.x = -1;\n            } else {\n                player.direction.x = 0;\n            }\n            if (this.y < this.mouse.y - (this.image.height)) {\n                player.direction.y = 1;\n            } else if (this.y > this.mouse.y) {\n                player.direction.y = -1;\n            } else {\n                player.direction.y = 0;\n            }\n        }\n        GameObject.prototype.update.call(this, bounds);\n        if (this.x < bounds.x - this.image.width) {\n            this.x = bounds.width;\n        } else if (this.x > bounds.width) {\n            this.x = bounds.x - this.image.width;\n        }\n        if (this.y < bounds.y) {\n            this.y = bounds.y;\n        } else if (this.y > bounds.height - this.image.height) {\n            this.y = bounds.height - this.image.height;\n        }\n    };\n\n    Player.prototype.Shoot = function() {\n        playSound(\"laser\");\n        gameObjects.unshift(new Laser(player.x, player.y, true, 24));\n        canShoot = false;\n    };\n\n    Player.prototype.die = function() {\n        GameObject.prototype.die.call(this);\n        playSound(\"explosion\");\n        spray(this.x + this.image.width / 2, this.y + this.image.height / 2, 200, \"#FFCC00\");\n        this.lastScore = score;\n        endGame();\n    };\n\n    Player.prototype.gotShot = function(shot) {\n        if (shot.alive) {\n            if (this.lives <= 1) {\n                this.die();\n            } else {\n                this.lives--;\n                spray(this.x + this.image.width / 2, this.y + this.image.height / 2, 100, \"#FFCC00\");\n            }\n        }\n    };\n\n    /**\n     * Constructor for Planet (background objects) extends GameObject\n     * @param {string} src\n     * @param {int} x\n     * @param {int} y\n     */\n    function Planet(src, x, y) {\n        GameObject.call(this, src, x, y);\n    }\n\n    Planet.prototype = Object.create(GameObject.prototype);\n    Planet.prototype.update = function(bounds) {\n        planet.image.width = displayRect.width;\n        planet.image.height = displayRect.height;\n        GameObject.prototype.update.call(this, bounds);\n    };\n\n    /**\n     * Constructor for enemy craft (answers) extends GameObject\n     * @param {string} src\n     * @param {int} x\n     * @param {int} y\n     * @param {string} text\n     * @param {float} fraction\n     */\n    function Enemy(src, x, y, text, fraction) {\n        GameObject.call(this, src, x, y);\n        this.xspeed = enemySpeed;\n        this.yspeed = enemySpeed * (2 + Math.random()) / 4;\n        this.movespeed.x = 0;\n        this.movespeed.y = 0;\n        this.direction.y = 1;\n        this.text = text;\n        this.fraction = fraction;\n        this.movementClock = 0;\n        this.shotFrequency = 80;\n        this.shotClock = (1 + Math.random()) * this.shotFrequency;\n        this.level = level;\n    }\n\n    Enemy.prototype = Object.create(GameObject.prototype);\n\n    Enemy.prototype.update = function(bounds) {\n\n        if (this.y < bounds.height / 10 || this.y > bounds.height * 9 / 10) {\n            this.movespeed.x = this.xspeed * 1;\n            this.movespeed.y = this.yspeed * 5;\n        } else {\n            this.movespeed.x = this.xspeed;\n            this.movespeed.y = this.yspeed;\n        }\n\n        GameObject.prototype.update.call(this, bounds);\n\n        this.movementClock--;\n\n        if (this.movementClock <= 0) {\n            this.direction.x = Math.floor(Math.random() * 3) - 1;\n            this.movementClock = (2 + Math.random()) * 30;\n        }\n\n        this.shotClock -= enemySpeed;\n\n        if (this.shotClock <= 0) {\n            if (this.y < bounds.height * 0.6) {\n                playSound(\"enemylaser\");\n                var laser = new Laser(this.x, this.y);\n                laser.direction.y = 1;\n                laser.friendly = false;\n                gameObjects.unshift(laser);\n                this.shotClock = (1 + Math.random()) * this.shotFrequency;\n            }\n        }\n\n        if (this.x < bounds.x - this.image.width) {\n            this.x = bounds.width;\n        } else if (this.x > bounds.width) {\n            this.x = bounds.x - this.image.width;\n        }\n        if (this.y > bounds.height + this.image.height && this.alive) {\n            this.alive = false;\n            if (this.fraction > 0) {\n                currentPointsLeft -= this.fraction;\n                score -= 1000 * this.fraction;\n            }\n\n            shipReachedEnd.call(this);\n        }\n    };\n\n    Enemy.prototype.draw = function(context) {\n        GameObject.prototype.draw.call(this, context);\n\n        context.fillStyle = '#FFFFFF';\n        context.font = \"15px Audiowide\";\n        context.textAlign = 'center';\n\n        wrapText(context, this.text, true, 17, displayRect.width * 0.2, this.x + this.image.width / 2, this.y - 5);\n    };\n\n    Enemy.prototype.die = function() {\n        GameObject.prototype.die.call(this);\n        spray(this.x + this.image.width, this.y + this.image.height, 50 + (this.fraction * 150), \"#FF0000\");\n\n        // Adjust Score.\n        score += this.fraction * 1000;\n\n        // Kill off the ship.\n        playSound(\"explosion\");\n    };\n\n    Enemy.prototype.gotShot = function(shot) {\n        // Default behaviour, to be overridden.\n        shot.die();\n        this.die();\n    };\n\n    /**\n     * Helper function to remove any stray ships on level advance\n     */\n    function killAllAlive() {\n        currentTeam.forEach(function(enemy) {\n            if (enemy.alive) {\n                // Make the fraction 0 so it won't count as anything and make a new level.\n                enemy.fraction = 0;\n                enemy.die();\n            }\n        });\n        currentTeam = [];\n    }\n\n    /**\n     * Helper function for True/False questions\n     * @param {int} x\n     * @param {int} y\n     * @param {string} text\n     * @param {float} fraction\n     */\n    function TFEnemy(x, y, text, fraction) {\n        Enemy.call(this, \"pix/enemy.png\", x, y, text, fraction);\n    }\n\n    TFEnemy.prototype = Object.create(Enemy.prototype);\n\n    TFEnemy.prototype.die = function() {\n        // TrueFalse questions are very simple, if either of the ships die, Enemy.prototype.die will handle\n        // the score adding of 1000 or 0, and then this will kill the other remaining ship.\n        Enemy.prototype.die.call(this);\n        killAllAlive();\n        // Only goes to the next level if the result is \"true\", as no matter what enemy dies first, the opposite will\n        // die immediately after.\n        if (this.fraction > 0) {\n            nextLevel();\n        }\n    };\n\n    TFEnemy.prototype.gotShot = function(shot) {\n        if (this.fraction > 0) {\n            shot.die();\n            this.die();\n        } else {\n            score += (this.fraction - 0.5) * 600;\n            shot.deflect();\n        }\n    };\n\n    /**\n     * Helper function for multiple choice questions (MCQ)\n     * @param {int} x\n     * @param {int} y\n     * @param {string} text\n     * @param {float} fraction\n     * @param {boolean} single\n     */\n    function MultiEnemy(x, y, text, fraction, single) {\n        Enemy.call(this, \"pix/enemy.png\", x, y, text, fraction);\n        this.single = single;\n    }\n\n    MultiEnemy.prototype = Object.create(Enemy.prototype);\n\n    MultiEnemy.prototype.die = function() {\n        Enemy.prototype.die.call(this);\n        if (this.fraction > 0) {\n            currentPointsLeft -= this.fraction;\n        }\n        if ((this.single && this.fraction === 1) && this.fraction >= 1 || (this.fraction > 0 && currentPointsLeft <= 0)) {\n            killAllAlive();\n            nextLevel();\n        }\n    };\n\n    MultiEnemy.prototype.gotShot = function(shot) {\n        if (this.fraction >= 1 || (this.fraction > 0 && !this.single)) {\n            shot.die();\n            this.die();\n        } else {\n            score += (this.fraction - 0.5) * 600;\n            shot.deflect();\n        }\n    };\n\n    /**\n     * Helper function for matching questions\n     * @param {int} x\n     * @param {int} y\n     * @param {string} text\n     * @param {float} fraction\n     * @param {int} pairid\n     * @param {boolean} stem\n     */\n    function MatchEnemy(x, y, text, fraction, pairid, stem) {\n        this.stem = stem ? true : false;\n        if (this.stem) {\n            Enemy.call(this, \"pix/enemystem.png\", x, y, text, fraction);\n        } else {\n            Enemy.call(this, \"pix/enemychoice.png\", x, y, text, fraction);\n        }\n        this.pairid = pairid;\n        this.shotFrequency = 160;\n        this.hightlighted = false;\n    }\n\n    MatchEnemy.prototype = Object.create(Enemy.prototype);\n\n    MatchEnemy.prototype.die = function() {\n        currentPointsLeft -= this.fraction;\n        // Sets the fraction as 0 to stop it adding to the score in #die()\n        this.fraction = 0;\n        Enemy.prototype.die.call(this);\n    };\n\n    MatchEnemy.prototype.gotShot = function(shot) {\n        if (shot.alive && this.alive) {\n            if (lastShot == -this.pairid) {\n\n                // Increasing the score here instead of in #die(), due to rounding issues being a few numbers off.\n                // This must be done before because when #die is invoked, as it sets the fraction as 0.\n                score += this.fraction * 1000 * 2;\n\n                shot.die();\n                this.die();\n                var alives = 0;\n                currentTeam.forEach(function(match) {\n                    if (match.pairid == lastShot) {\n                        match.die();\n                    }\n                    if (match.alive) {\n                        alives++;\n                    }\n                });\n\n                if (alives <= 0) {\n                    nextLevel();\n                }\n            } else {\n                if (lastShot == this.pairid) {\n                    shot.deflect();\n                } else {\n                    shot.die();\n                    this.hightlight();\n                    lastShot = this.pairid;\n                }\n            }\n        }\n    };\n\n    MatchEnemy.prototype.hightlight = function() {\n        currentTeam.forEach(function(match) {\n            match.unhightlight();\n        });\n        if (this.stem) {\n            this.loadImage(\"pix/enemystemselected.png\");\n        } else {\n            this.loadImage(\"pix/enemychoiceselected.png\");\n        }\n        this.hightlighted = true;\n    };\n\n    MatchEnemy.prototype.unhightlight = function() {\n        if (this.hightlighted) {\n            if (this.stem) {\n                this.loadImage(\"pix/enemystem.png\");\n            } else {\n                this.loadImage(\"pix/enemychoice.png\");\n            }\n        }\n        this.hightlighted = false;\n    };\n\n    /**\n     * Constructor for laser shots extends GameObject\n     * @param {int} x\n     * @param {int} y\n     * @param {bool} friendly\n     * @param {float} laserSpeed\n     */\n    function Laser(x, y, friendly, laserSpeed) {\n        GameObject.call(this, friendly ? \"pix/laser.png\" : \"pix/enemylaser.png\", x, y);\n        this.direction.y = -1;\n        this.friendly = friendly ? 1 : 0;\n        this.laserSpeed = laserSpeed || 12;\n    }\n    Laser.prototype = Object.create(GameObject.prototype);\n\n    Laser.prototype.update = function(bounds) {\n        GameObject.prototype.update.call(this, bounds);\n        if (this.x < bounds.x - this.image.width ||\n            this.x > bounds.width ||\n            this.y < bounds.y - this.image.height ||\n            this.y > bounds.height) {\n            this.alive = false;\n        }\n        this.velocity.y = this.laserSpeed * this.direction.y;\n    };\n\n    Laser.prototype.deflect = function() {\n        this.image = this.loadImage(\"pix/enemylaser.png\");\n        this.direction.y *= -1;\n        this.friendly = !this.friendly;\n        playSound(\"deflect\");\n    };\n\n    /**\n     * Constructor for explosion particle effects extends GameObject\n     * @param {int} x\n     * @param {int} y\n     * @param {float} velocity\n     * @param {string} colour\n     */\n    function Particle(x, y, velocity, colour) {\n        GameObject.call(this, null, x, y);\n        this.width = 2;\n        this.height = 2;\n        this.velocity.x = velocity.x;\n        this.velocity.y = velocity.y;\n        this.aliveTime = 0;\n        this.colour = colour;\n        this.decay = 1;\n    }\n\n    Particle.prototype = Object.create(GameObject.prototype);\n\n    Particle.prototype.update = function(bounds) {\n        GameObject.prototype.update.call(this, bounds);\n        if (this.x < bounds.x - this.width ||\n            this.x > bounds.width ||\n            this.y < bounds.y - this.height ||\n            this.y > bounds.height) {\n            this.alive = false;\n        }\n        this.aliveTime++;\n        if (this.aliveTime > (Math.random() * 15) + 5) {\n            this.alive = false;\n        }\n    };\n\n    Particle.prototype.getRect = function() {\n        return new Rectangle(this.x, this.y, this.width, this.height);\n    };\n\n    Particle.prototype.draw = function(context) {\n        context.fillStyle = this.colour;\n        context.fillRect(this.x, this.y, this.width, this.height);\n        context.stroke();\n    };\n\n    /**\n     * Helper function for background stars extends GameObject\n     * @param {object} bounds\n     */\n    function Star(bounds) {\n        GameObject.call(this, null, Math.random() * bounds.width, 0);\n        this.width = 2;\n        this.height = 2;\n        this.direction.y = 1;\n        this.movespeed.y = 0.2 + (Math.random() / 2);\n        this.aliveTime = 0;\n    }\n    Star.prototype = Object.create(GameObject.prototype);\n\n    Star.prototype.update = function(bounds) {\n        GameObject.prototype.update.call(this, bounds);\n        if (this.y > bounds.height) {\n            this.alive = false;\n        }\n    };\n\n    Star.prototype.draw = function(context) {\n        context.fillStyle = '#9999AA';\n        context.fillRect(this.x, this.y, this.width, this.height);\n        context.stroke();\n    };\n\n    /**\n     * Helper function to handle collisions between gameobjects.\n     * @param {object} object1\n     * @param {object} object2\n     * @return {boolean}\n     */\n    function collide(object1, object2) {\n        return object1.alive && object2.alive && (collideOrdered(object1, object2) || collideOrdered(object2, object1));\n    }\n\n    /**\n     * Helper funcction to handle collisions.\n     * @param {object} object1\n     * @param {object} object2\n     * @returns {boolean}\n     */\n    function collideOrdered(object1, object2) {\n        if (object1 instanceof Laser && object2 instanceof Player) {\n            if (!object1.friendly && objectsIntersect(object1, object2)) {\n                object2.gotShot(object1);\n                object1.die();\n                return true;\n            }\n        }\n        if (object1 instanceof Laser && object2 instanceof Enemy) {\n            if (object1.friendly && objectsIntersect(object1, object2)) {\n                object2.gotShot(object1);\n                return true;\n            }\n        }\n        if (object1 instanceof Player && object2 instanceof Enemy) {\n            if (objectsIntersect(object1, object2)) {\n                object1.die();\n                return true;\n            }\n        }\n        return false;\n    }\n\n    /**\n     * Helper function to handle intersections between GameObjects.\n     * @param {object} object1\n     * @param {object} object2\n     * @return {boolean}\n     */\n    function objectsIntersect(object1, object2) {\n        var rect1 = object1.getRect();\n        var rect2 = object2.getRect();\n        return rect1.Intersect(rect2);\n    }\n\n    /**\n     * Helper function for spraying particle (explosion) effects\n     * @param {int} x\n     * @param {int} y\n     * @param {int} num\n     * @param {string} colour\n     */\n    function spray(x, y, num, colour) {\n        for (var i = 0; i < num; i++) {\n            particles.push(new Particle(x, y, {x: (Math.random() - 0.5) * 16, y: ((Math.random() - 0.5) * 16) + 3}, colour));\n        }\n    }\n\n    /**\n     * Helper function to display answers.\n     * @param {object} context\n     * @param {string} input\n     * @param {bool} wrapUpwards\n     * @param {int} textHeight\n     * @param {int} maxLineWidth\n     * @param {int} x\n     * @param {int} y\n     */\n    function wrapText(context, input, wrapUpwards, textHeight, maxLineWidth, x, y) {\n        var drawLines = [];\n        var originalY = y;\n        var words = input.split(' ');\n        var line = '';\n\n        // Loops through the words, and preprocesses each line with the correct string value and y location.\n        words.forEach(function(word) {\n            var tempLine = line + ' ' + word;\n            var metrics = context.measureText(tempLine);\n            var testWidth = metrics.width;\n\n            // If the line with the new word is too long, then push the current line without the new word to drawLines.\n            if (testWidth > maxLineWidth) {\n                drawLines.push({\n                    text: line,\n                    y: y += textHeight\n                });\n\n                line = word;\n            } else {\n                // If it's shorted than the limit, just add the word to the line and move on.\n                line = tempLine;\n            }\n        });\n\n        // Push the last line, if it exists.\n        drawLines.push({\n            text: line,\n            y: y += textHeight\n        });\n\n        // The offset the text was created.\n        var yOffset = y - originalY;\n\n        drawLines.forEach(function(drawLine) {\n            // If it is suppose to wrap upwards (i.e. for enemy ships) it shifts all questions upwards the amount the\n            // questions go down.\n            var modifier = wrapUpwards ? -yOffset : 0;\n\n            context.fillText(drawLine.text, x, drawLine.y + modifier);\n        });\n    }\n\n    /**\n     * Helper function for end of level.\n     */\n    function shipReachedEnd() {\n        var amountLeft = currentTeam.filter(function(enemy) {\n            return enemy.alive;\n        }).length;\n\n        if (amountLeft === 0 && (currentPointsLeft < this.fraction || currentPointsLeft <= 0)\n            && this.level === level && player.alive) {\n            nextLevel();\n        }\n    }\n\n    // Input.\n\n    var canShoot = true;\n\n    /**\n     * Helper function for game menu from keyboard.\n     * @param {object} e\n     */\n    function menukeydown(e) {\n        if ([32, 37, 38, 39, 40].indexOf(e.keyCode) !== -1) {\n            e.preventDefault();\n            if (e.keyCode === 32) {\n                loadGame();\n            }\n        }\n    }\n\n    /**\n     * Helper function for game menu on mobile.\n     * @param {object} e\n     */\n    function menumousedown(e) {\n        if (e.target === stage) {\n            loadGame();\n        }\n    }\n\n    /**\n     * Helper function for game menu on mobile.\n     * @param {object} e\n     */\n    function menutouchend(e) {\n        if (e.target === stage) {\n            loadGame();\n        }\n    }\n\n    /**\n     * Helper function for keyboard movement.\n     * @param {object} e\n     */\n    function keydown(e) {\n        if ([32, 37, 38, 39, 40].indexOf(e.keyCode) !== -1) {\n            e.preventDefault();\n            if (e.keyCode === 32 && player.alive && canShoot) {\n                player.Shoot();\n            } else if (e.keyCode === 37) {\n                player.direction.x = -1;\n            } else if (e.keyCode === 38) {\n                player.direction.y = -1;\n            } else if (e.keyCode === 39) {\n                player.direction.x = 1;\n            } else if (e.keyCode === 40) {\n                player.direction.y = 1;\n            }\n        }\n    }\n\n    /**\n     * Helper function for keyboard movement.\n     * @param {object} e\n     */\n    function keyup(e) {\n        if (e.keyCode === 32) {\n            canShoot = true;\n        } else if ([37, 39].indexOf(e.keyCode) !== -1) {\n            player.direction.x = 0;\n        } else if ([38, 40].indexOf(e.keyCode) !== -1) {\n            player.direction.y = 0;\n        }\n    }\n\n    /**\n     * Helper function for mouse click (starts the player shooting if you clicked on them, moving if you didn't).\n     * @param {object} e\n     */\n    function mousedown(e) {\n        if (e.target === stage) {\n            var playerWasClicked = player.getRect().Contains({x: e.offsetX, y: e.offsetY});\n            if (playerWasClicked && player.alive) {\n                player.Shoot();\n            }\n            if (!mouseDown) {\n                player.mouse.x = e.offsetX;\n                player.mouse.y = e.offsetY;\n                mouseDown = true;\n            }\n        }\n    }\n\n    /**\n     * Helper function for mouse release. (stops the Player) for mouse mode\n     * @param {object} e\n     */\n    function mouseup() {\n        player.direction.x = 0;\n        player.direction.y = 0;\n        mouseDown = false;\n    }\n\n    /**\n     * Helper function for mouse movement.\n     * @param {object} e\n     */\n    function mousemove(e) {\n        player.mouse.x = e.offsetX;\n        player.mouse.y = e.offsetY;\n    }\n\n    /**\n     * Helper function for cancelled event.\n     * @param {object} event\n     */\n    function cancelled(event) {\n        if (event.target === stage) {\n            event.preventDefault();\n        }\n    }\n\n    /**\n     * Helper function for movement on mobile touch devices.\n     * @param {object} e\n     */\n    function touchstart(e) {\n        if (e.target === stage) {\n            if (player.alive && e.touches.length > 1) {\n                player.Shoot();\n            } else {\n                touchDown = true;\n                touchmove(e);\n            }\n\n            e.preventDefault();\n        }\n    }\n\n    /**\n     * Helper function for movement on mobile touch devices.\n     * @param {object} e\n     */\n    function touchend(e) {\n        if (e.touches.length === 0) {\n            touchDown = false;\n        }\n        player.direction.x = 0;\n        player.direction.y = 0;\n\n        if (e.target === stage) {\n            e.preventDefault();\n        }\n    }\n\n    /**\n     * Helper function for movement on mobile touch devices.\n     * @param {object} e\n     */\n    function touchmove(e) {\n        var rect = e.target.getBoundingClientRect();\n        // Required for getting the stage's relative touch position, due to a previous significant offset.\n        var x = e.touches[0].pageX - rect.left;\n        var y = e.touches[0].clientY - rect.top;\n\n        window.stage = stage;\n        player.mouse.x = x;\n        player.mouse.y = y;\n\n        if (e.target === stage) {\n            e.preventDefault();\n        }\n    }\n\n    /**\n     * Helper function to shuffle levels.\n     * @param {array} array\n     * @return {array}\n     */\n    function shuffle(array) {\n        var currentIndex = array.length;\n        var temporaryValue;\n        var randomIndex;\n\n        while (0 !== currentIndex) {\n\n            randomIndex = Math.floor(Math.random() * currentIndex);\n            currentIndex -= 1;\n\n            temporaryValue = array[currentIndex];\n            array[currentIndex] = array[randomIndex];\n            array[randomIndex] = temporaryValue;\n        }\n\n        return array;\n    }\n\n    /**\n     * Initialization of the game.\n     * @param {array} q\n     * @param {array} qid\n     */\n    function doInitialize(q, qid) {\n        questions = q;\n        quizgame = qid;\n        if (document.addEventListener) {\n            document.addEventListener('fullscreenchange', fschange, false);\n            document.addEventListener('MSFullscreenChange', fschange, false);\n            document.addEventListener('mozfullscreenchange', fschange, false);\n            document.addEventListener('webkitfullscreenchange', fschange, false);\n        }\n        stage = document.getElementById(\"mod_quizgame_game\");\n        context = stage.getContext(\"2d\");\n        smallscreen();\n        interval = setInterval(function() {\n            showMenu();\n        }, 500);\n    }\n\n    return {\n        init: doInitialize,\n    };\n});\n"],"file":"quizgame.min.js"}
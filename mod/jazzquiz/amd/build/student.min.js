function _classCallCheck(a,b){if(!(a instanceof b)){throw new TypeError("Cannot call a class as a function")}}function _defineProperties(a,b){for(var c=0,d;c<b.length;c++){d=b[c];d.enumerable=d.enumerable||!1;d.configurable=!0;if("value"in d)d.writable=!0;Object.defineProperty(a,d.key,d)}}function _createClass(a,b,c){if(b)_defineProperties(a.prototype,b);if(c)_defineProperties(a,c);return a}define ("mod_jazzquiz/student",["jquery","mod_jazzquiz/core"],function(a,b){var c=b.Quiz,d=b.Question,e=b.Ajax,f=b.setText,g=function(){function b(c){_classCallCheck(this,b);this.quiz=c;this.voteAnswer=void 0;var d=this;a(document).on("submit","#jazzquiz_question_form",function(a){a.preventDefault();d.submitAnswer()}).on("click","#jazzquiz_save_vote",function(){d.saveVote()}).on("click",".jazzquiz-select-vote",function(){d.voteAnswer=this.value})}_createClass(b,[{key:"onNotRunning",value:function onNotRunning(){f(c.info,"instructions_for_student")}},{key:"onPreparing",value:function onPreparing(){f(c.info,"wait_for_instructor")}},{key:"onRunning",value:function onRunning(a){if(this.quiz.question.isRunning){return}var b=this.quiz.question.startCountdown(a.questiontime,a.delay);if(!b){f(c.info,"wait_for_instructor")}}},{key:"onReviewing",value:function onReviewing(){this.quiz.question.isVoteRunning=!1;this.quiz.question.isRunning=!1;this.quiz.question.hideTimer();c.hide(d.box);f(c.info,"wait_for_instructor")}},{key:"onSessionClosed",value:function onSessionClosed(){window.location=location.href.split("&")[0]}},{key:"onVoting",value:function onVoting(b){if(this.quiz.question.isVoteRunning){return}c.info.html(b.html);c.show(c.info);for(var d=b.options,e=0;e<d.length;e++){c.addMathjaxElement(a("#"+d[e].content_id),d[e].text);if("stack"===d[e].question_type){c.renderMaximaEquation(d[e].text,d[e].content_id)}}this.quiz.question.isVoteRunning=!0}},{key:"onStateChange",value:function onStateChange(){}},{key:"onQuestionTimerEnding",value:function onQuestionTimerEnding(){}},{key:"onTimerTick",value:function onTimerTick(a){f(d.timer,"question_will_end_in_x_seconds","jazzquiz",a)}},{key:"onQuestionRefreshed",value:function onQuestionRefreshed(){}},{key:"submitAnswer",value:function submitAnswer(){var a=this;if(this.quiz.question.isSaving){return}this.quiz.question.isSaving=!0;if("undefined"!=typeof tinyMCE){tinyMCE.triggerSave()}var b=d.form.serializeArray(),g={};for(var h in b){if(b.hasOwnProperty(h)){g[b[h].name]=b[h].value}}e.post("save_question",g,function(b){if(0<b.feedback.length){c.show(c.info.html(b.feedback))}else{f(c.info,"wait_for_instructor")}a.quiz.question.isSaving=!1;if(!a.quiz.question.isRunning){return}if(a.quiz.question.isVoteRunning){return}c.hide(d.box);a.quiz.question.hideTimer()}).fail(function(){a.quiz.question.isSaving=!1})}},{key:"saveVote",value:function saveVote(){e.post("save_vote",{vote:this.voteAnswer},function(a){if("success"===a.status){f(c.info,"wait_for_instructor")}else{f(c.info,"you_already_voted")}})}}]);return b}();return{initialize:function initialize(){var a=new c(g);a.poll(2e3)}}});
//# sourceMappingURL=student.min.js.map
